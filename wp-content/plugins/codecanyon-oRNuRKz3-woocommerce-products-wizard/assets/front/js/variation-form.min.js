function _typeof(t){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}!function(t,i){"use strict";"function"==typeof define&&define.amd?define(["jquery"],i):"object"===("undefined"==typeof exports?"undefined":_typeof(exports))&&"undefined"!=typeof module&&"function"==typeof require?module.exports=i(require("jquery")):i(t.jQuery)}(this,function(h){"use strict";h.fn.wcpwVariationForm=function(){this.unbind("check_variations update_variation_values found_variation change"),this.find('[data-component~="wcpw-product-variations-item-input"]').unbind("change"),this.off(".wc-variation-form");var p=this.on("change",'[data-component~="wcpw-product-variations-item-input"]',function(){var t=h(this),i=t.closest('[data-component~="wcpw-product-variations"]');i.find('[data-component~="wcpw-product-variations-variation-id"]').val("").change(),i.trigger("woocommerce_variation_select_change").trigger("check_variations",[t.attr("data-name"),!0]),t.blur(),h().uniform&&h.isFunction(h.uniform.update)&&h.uniform.update()}).on("check_variations",function(t,i,a){var e=!0,r={},n=h(this),o=n.closest('[data-component~="wcpw-product"]'),c=o.find('[data-component~="wcpw-product-price"]'),d=o.find('[data-component~="wcpw-product-description"]'),p=o.find('[data-component~="wcpw-product-availability"]');n.find('[data-component~="wcpw-product-variations-item-input"]').each(function(){var t=h(this);"SELECT"!==t.prop("tagName")||t.val()&&0!==t.val().length||(e=!1),"SELECT"!==t.prop("tagName")&&!0!==t.prop("checked")||(r[t.attr("data-name")]=t.val())});var s=n.data("product_variations"),u=h.fn.wcpwVariationFormFindMatchingVariations(s,r);if(e){var m=null;for(var f in u)if(u.hasOwnProperty(f)){var l=h.extend({},r),w=h.extend({},u[f].attributes);for(var v in w)w.hasOwnProperty(v)&&""===w[v]&&(w[v]=l[v]);if(JSON.stringify(w)===JSON.stringify(l)){m=u[f];break}}m?(n.find('[data-component~="wcpw-product-variations-variation-id"]').val(m.variation_id).change(),n.trigger("found_variation",[m])):a||(n.trigger("reset_image"),n.trigger("hide_variation"))}else a||(n.trigger("reset_image"),n.trigger("hide_variation")),i||(c.html(c.data("default")),d.html(d.data("default")),p.html(p.data("default")));n.trigger("update_variation_values",[h.extend({},u),h.extend({},r)])}).on("reset_image",function(){return h.fn.wcpwVariationFormUpdateImage(p,!1)}).on("update_variation_values",function(t,m,f){if(!m||Object.keys(m).length<=0)return this;var i=h(this);return i.find('[data-component~="wcpw-product-variations-item"]').each(function(){var t,i,a=h(this),e=a.attr("data-name"),r=a.find('[data-component~="wcpw-product-variations-item-value"]');for(var n in r.removeClass("active").removeAttr("disabled"),m)if(m.hasOwnProperty(n)){var o=h.extend({},m[n].attributes);for(var c in o)if(o.hasOwnProperty(c)&&c===e){var d=o[c];if(!d){var p=h.extend({},f),s=h.extend({},o);for(var u in delete s[c],delete p[c],s)s.hasOwnProperty(u)&&""===s[u]&&(delete s[u],delete p[u]);JSON.stringify(s)===JSON.stringify(p)&&r.addClass("active")}d=(d=(d=h("<div/>").html(d).text()).replace(/'/g,"\\'")).replace(/"/g,'"'),r.filter(""!==d?'[value="'.concat(d,'"]'):"*").addClass("active")}}r.filter(":not(.active)").attr("disabled",!0),"SELECT"===a.prop("tagName")?!a.find("option:selected").prop("disabled")||0<(t=a.find("option:not([disabled])")).length&&a.val(t.eq(0).attr("value")):!r.filter(":checked").prop("disabled")||0<(i=r.filter(":not([disabled])")).length&&i.eq(0).prop("checked",!0)}),i.trigger("woocommerce_update_variation_values"),this}).on("found_variation",function(t,i){var a=h(this).closest('[data-component~="wcpw-product"]'),e=a.find('[data-component~="wcpw-product-description"]'),r=a.find('[data-component~="wcpw-product-availability"]'),n=a.find('[data-component~="wcpw-add-cart-product"]'),o=a.find('[data-component~="wcpw-product-choose"]'),c=a.find('[data-component~="wcpw-product-quantity"] :input:not([type="button"])'),d=!0;return i.price_html&&a.find('[data-component~="wcpw-product-price"]').html(i.price_html),i.min_qty&&c.attr("min",i.min_qty),i.max_qty&&c.attr("max",i.max_qty),i.description?e.html(i.description):i.variation_description?e.html(i.variation_description):e.html(e.data("default")),i.availability_html?r.html(i.availability_html):r.html(r.data("default")),i.is_purchasable&&i.is_in_stock&&i.variation_is_visible||(d=!1),n.add(o).attr("disabled",!d),h.fn.wcpwVariationFormUpdateImage(p,i)});return p.trigger("check_variations"),p.trigger("wc_variation_form"),p.trigger("launched.variationForm.wcProductsWizard"),p},h.fn.wcpwVariationFormResetAttribute=function(t){return void 0!==this.attr("data-o_".concat(t))&&this.attr(t,this.attr("data-o_".concat(t))),this},h.fn.wcpwVariationFormSetAttribute=function(t,i){return void 0===this.attr("data-o_".concat(t))&&this.attr("data-o_".concat(t),this.attr(t)?this.attr(t):""),!1===i?this.removeAttr(t):this.attr(t,i),this},h.fn.wcpwVariationFormUpdateImage=function(t,i){var a=t.closest('[data-component~="wcpw-product"]'),e=a.find('[data-component~="wcpw-product-thumbnail-image"]'),r=a.find('[data-component~="wcpw-product-thumbnail-link"]');return i&&i.image&&i.image.src&&1<i.image.src.length?(e.wcpwVariationFormSetAttribute("src",i.image_src||i.image.src),e.wcpwVariationFormSetAttribute("srcset",i.image_srcset||i.image.srcset),e.wcpwVariationFormSetAttribute("sizes",i.image_sizes||i.image.sizes),e.wcpwVariationFormSetAttribute("title",i.image_title||i.image.title),e.wcpwVariationFormSetAttribute("alt",i.image_alt||i.image.alt),r.wcpwVariationFormSetAttribute("href",i.image_link||i.image.full_src)):(e.wcpwVariationFormResetAttribute("src"),e.wcpwVariationFormResetAttribute("srcset"),e.wcpwVariationFormResetAttribute("sizes"),e.wcpwVariationFormResetAttribute("alt"),r.wcpwVariationFormResetAttribute("href")),this},h.fn.wcpwVariationFormFindMatchingVariations=function(t,i){var a=[],e={};for(var r in t)if(t.hasOwnProperty(r)){var n=t[r];for(var o in i)if(i.hasOwnProperty(o)){var c=h.extend({},n.attributes),d=h.extend({},i);for(var p in delete c[o],delete d[o],c)c.hasOwnProperty(p)&&""===c[p]&&(delete c[p],delete d[p]);JSON.stringify(c)!==JSON.stringify(d)||e.hasOwnProperty(n.variation_id)||(e[n.variation_id]=n.variation_id,a.push(n))}}return a};function t(){h('[data-component~="wcpw-product-variations"]').each(function(){return h(this).wcpwVariationForm()})}h(document).ready(t).on("ajaxCompleted.wcProductsWizard init.variationForm.wcProductsWizard",t)});