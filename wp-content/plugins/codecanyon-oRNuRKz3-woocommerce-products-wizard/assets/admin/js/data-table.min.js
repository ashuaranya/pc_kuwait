function _typeof(t){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}!function(t,e){"use strict";"function"==typeof define&&define.amd?define(["jquery"],e):"object"===("undefined"==typeof exports?"undefined":_typeof(exports))&&"undefined"!=typeof module&&"function"==typeof require?module.exports=e(require("jquery")):e(t.jQuery)}(this,function(c){"use strict";function e(t,e){return this.element=t,this.options=c.extend({},a,e),this.init()}var a={};e.prototype.init=function(){var t=this;return this.$element=c(this.element),c.fn.sortable&&this.$element.sortable({items:'[data-component~="wcpw-data-table-item"]',update:function(){return t.recalculation()}}),this},e.prototype.addItem=function(t){t=0!==t.length?t:this.$element.find('[data-component~="wcpw-data-table-item"]:last');var e=this.$element.find('[data-component~="wcpw-data-table-item-template"]');0===e.length&&(e=t);var a=e.clone();a.attr("data-component","wcpw-data-table-item").find(":input").each(function(){var o=this,i=c(this);c.each(this.attributes,function(t,e){var a=e.name,n=e.value;return-1===a.indexOf("data-make")?o:i.attr(a.replace("data-make-",""),n)})});var n=a.find('[data-component~="wcpw-data-table-modal"]'),o=a.find('[data-component~="wcpw-data-table-modal-open"]'),i=~~(1e6*Math.random());return n.attr("id","wcpw-data-table-modal-".concat(i.toString())),o.attr("href","#wcpw-data-table-modal-".concat(i.toString())),a.insertAfter(t),this.recalculation(),c(document).trigger("added.item.dataTable.wcpw",[this,a]),this},e.prototype.removeItem=function(t){return t.is(":only-child")?t.find(":input").val(""):t.remove(),this.recalculation(),c(document).trigger("removed.item.dataTable.wcpw",[this]),this},e.prototype.recalculation=function(){return this.$element.find('[data-component~="wcpw-data-table-item"]').each(function(n){return c(this).find(":input").each(function(){var t=c(this),e=t.attr("name");if(!e)return this;var a=n.toString().split("").reverse().join("");return t.attr("name",e.split("").reverse().join("").replace(/]\d+\[/,"]".concat(a,"[")).split("").reverse().join(""))})})},c.fn.wcpwDataTable=function(t){return this.each(function(){c.data(this,"wcpw-data-table")||c.data(this,"wcpw-data-table",new e(this,t))})};function t(){return c('[data-component~="wcpw-data-table"]').each(function(){return c(this).wcpwDataTable()})}c(document).ready(t).on("ajaxComplete.wcpw init.dataTable.wcpw",t).on("click",'[data-component~="wcpw-data-table-item-add"]',function(){var t=c(this),e=t.closest('[data-component~="wcpw-data-table"]');return e.data("wcpw-data-table")?e.data("wcpw-data-table").addItem(t.closest('[data-component~="wcpw-data-table-item"]')):this}).on("click",'[data-component~="wcpw-data-table-item-remove"]',function(){var t=c(this),e=t.closest('[data-component~="wcpw-data-table"]');return e.data("wcpw-data-table")?e.data("wcpw-data-table").removeItem(t.closest('[data-component~="wcpw-data-table-item"]')):this})});