jQuery(document).ready(function(o){"use strict";var e={init:function(){this.sort_by(),this.review_popup(),this.review_total_price(),this.events(),this.mobileControlBar(),this.getShortShareLink()},sort_by:function(){jQuery(".woopb-sort-by-button").on("change",function(){var o=jQuery(this).val();window.location.href=o})},review_popup:function(){jQuery("#vi_wpb_sendtofriend").on("click",function(){e.review_popup_show()}),jQuery("#vi_wpb_popup_email .vi-wpb_overlay, #vi_wpb_popup_email .woopb-close").on("click",function(){e.review_popup_hide()})},review_popup_show:function(){jQuery("html").css({overflow:"hidden"}),jQuery("#vi_wpb_popup_email").fadeIn(500)},review_popup_hide:function(){jQuery("#vi_wpb_popup_email").fadeOut(300),jQuery("html").css({overflow:"inherit"})},review_total_price:function(){jQuery(".woopb-qty-input").on("change",function(){var o=parseInt(jQuery(this).val()),e=parseFloat(jQuery(this).closest("td").attr("data-price")),n=jQuery(this).closest("tr").find(".woopb-total .woocommerce-Price-amount").contents();if(e>0){var t=o*e;n.filter(function(o){return 3==this.nodeType}).each(function(){this.textContent=t})}})},events:function(){jQuery(".woopb-share-link").on("click",function(){jQuery(this).select(),document.execCommand("copy")})},mobileControlBar(){let o=jQuery(".woopb-overlay"),e=jQuery(".vi-wpb-wrapper .woopb-steps"),n=jQuery(".woocommerce-product-builder-sidebar"),t=jQuery(".woopb-steps-detail-btn"),i=jQuery(".woopb-mobile-filters-control"),s=jQuery(".woopb-close-modal");function c(){n.hide("slow"),e.hide("show"),o.hide(),s.hide()}t.on("click",function(){e.toggle("slow"),n.hide()}),t.on("mouseup",function(){"none"===e.css("display")?o.show("slow"):o.hide(),"none"===e.css("display")?s.show():s.hide()}),i.on("click",function(){n.toggle("slow"),e.hide()}),i.on("mouseup",function(){"none"===n.css("display")?o.show("slow"):o.hide(),"none"===n.css("display")?s.show():s.hide()}),o.on("click",function(){c()}),s.on("click",function(){c()})},getShortShareLink(){o("#vi-wpb-get-short-share-link").on("click",function(){let e=o(this);o.ajax({url:_woo_product_builder_params.ajax_url,type:"post",dataType:"json",data:{action:"woopb_get_short_share_link",nonce:o("#_nonce").val(),woopb_id:o("[name=woopb_id]").val()},beforeSend:function(){e.addClass("woopb-loading")},success:function(e){if(e.success&&e.data){o(".woopb-short-share-link").html(`<div class="woopb-short-share-link-inner">\n                                <span class="woopb-short-share-link-text">${e.data}</span>\n                                <i class="dashicons dashicons-admin-page woopb-copy-short-link"></i></div>`).on("click",function(){let e=o(this).find(".woopb-short-share-link-text").get(0);if(window.getSelection){let o=window.getSelection(),n=document.createRange();n.selectNode(e),o.removeAllRanges(),o.addRange(n),document.execCommand("copy")}else if(document.selection){let o=document.body.createTextRange();o.moveToElementText(e),o.select().createTextRange(),document.execCommand("copy")}})}},complete(){e.removeClass("woopb-loading")}})})}};e.init()});